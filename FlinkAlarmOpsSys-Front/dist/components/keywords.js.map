{"version":3,"sources":["../../src/components/keywords.js"],"names":["init","$","get","allRulesUrl","rulesdata","each","id","rule","rulesMap","ruleid","content","allJobsUrl","data","rulesObj","index","obj","appendHtml","jobId","jobName","rules","split","length","modelInit","dialogInit","adddialogInit","alarmModelInit","append","css","click","ruleArray","itemindex","indexOf","splice","toString","ajax","type","url","updateJobUrl","JSON","stringify","dataType","contentType","success","result","console","log","ret","remove","error","e","status","responseText","alert","val","samerule","changeJobOnly","oldid","push","updateJob","JsonObj","newRuleUrl","ready","updateRule","choose","minute","num","postParam","setalarmUrl","html","alarmurl","getalarmUrl","fail","initfail","reinitfail","rulesStr","htmlStr","rStr","location","reload","config","KeyWordsCtrl","constructor","name","bootData","user","templateUrl","deleteRuleUrl","updateRuleUrl","Object","rulesArrayList"],"mappings":";;;;;AA8BE,WAASA,IAAT,GAAe;AACfC,IAAAA,CAAC,CAACC,GAAF,CAAMC,WAAN,EAAkB,UAASC,SAAT,EAAmB;AACrC;;;AAGIH,MAAAA,CAAC,CAACI,IAAF,CAAOD,SAAP,EAAiB,UAASE,EAAT,EAAYC,IAAZ,EAAiB;AACtCC,QAAAA,QAAQ,CAACD,IAAI,CAACE,MAAN,CAAR,GAAsBF,IAAI,CAACG,OAA3B;AACK,OAFD;AAIJ;;;;;AAIIT,MAAAA,CAAC,CAACC,GAAF,CAAMS,UAAN,EAAiB,UAASC,IAAT,EAAc;AAC1B;AACAC,QAAAA,QAAQ,GAACD,IAAT;AACDX,QAAAA,CAAC,CAACI,IAAF,CAAOO,IAAP,EAAY,UAASE,KAAT,EAAeC,GAAf,EACV;AACN;AACAC,UAAAA,UAAU,GAAC,wDACN,gFADM,GAEN,2BAFM,GAGN,qBAHM,GAGgBD,GAAG,CAACE,KAHpB,GAG0B,aAH1B,GAIN,qBAJM,GAIgBF,GAAG,CAACG,OAJpB,GAI4B,OAJ5B,GAKN,gCALM,GAK2BL,QAAQ,CAACC,KAAD,CAAR,CAAgBK,KAAhB,CAAsBC,KAAtB,CAA4B,GAA5B,EAAiCC,MAL5D,GAKmE,OALnE,GAMN,4CANM,GAMuCP,KANvC,GAM6C,4BAN7C,GAON,+BAPM,GAQN,uCARM,GASN,wBATM,GASmBC,GAAG,CAACE,KATvB,GAS6B,4BAT7B,GAUN,YAVM,GAUOF,GAAG,CAACE,KAVX,GAUiB,sBAVjB,GAWF,cAXE,GAWaF,GAAG,CAACE,KAXjB,GAWuB,iDAXvB,GAaF,uCAbE,GAcF,2BAdE,GAc0BH,KAd1B,GAcgC,4BAdhC,GAeF,sBAfE,GAeqBA,KAfrB,GAe2B,sBAf3B,GAgBE,iBAhBF,GAgBoBA,KAhBpB,GAgB0B,gDAhB1B,GAiBF,wDAjBE,GAkBF,uEAlBE,GAoBF,mBApBE,GAoBkBC,GAAG,CAACE,KApBtB,GAoB4B,2DApB5B,GAoBwFF,GAAG,CAACE,KApB5F,GAoBkG,8HApBlG,GAoBiOF,GAAG,CAACG,OApBrO,GAoB6O,QApB7O,GAoBsPI,SAAS,CAACT,QAAQ,CAACC,KAAD,CAAR,CAAgBK,KAAjB,EAAuBL,KAAvB,CApB/P,GAoB6R,mBApB7R,GAoBiTC,GAAG,CAACE,KApBrT,GAoB2T,gBApB3T,GAqBFM,UAAU,CAACV,QAAQ,CAACC,KAAD,CAAR,CAAgBK,KAAjB,EAAuBL,KAAvB,CArBR,GAqBsCU,aAAa,CAACV,KAAD,CArBnD,GAqB2DW,cAAc,CAACX,KAAD,CArBpF;AAuBAb,UAAAA,CAAC,CAAC,aAAD,CAAD,CAAiByB,MAAjB,CAAwBV,UAAxB;AACAf,UAAAA,CAAC,CAAC,gBAAD,CAAD,CAAoB0B,GAApB,CAAwB,SAAxB,EAAkC,MAAlC;AACA1B,UAAAA,CAAC,CAAC,OAAD,CAAD,CAAW0B,GAAX,CAAe,SAAf,EAAyB,MAAzB;AACA1B,UAAAA,CAAC,CAAC,SAAOa,KAAR,CAAD,CAAgBc,KAAhB,CAAsB,YAAU;AAC9B3B,YAAAA,CAAC,CAAC,YAAUa,KAAX,CAAD,CAAmBa,GAAnB,CAAuB,SAAvB,EAAiC,OAAjC;AACD,WAFD;AAGJ;;;;AAGI1B,UAAAA,CAAC,CAACI,IAAF,CAAOQ,QAAQ,CAACC,KAAD,CAAR,CAAgBK,KAAhB,CAAsBC,KAAtB,CAA4B,GAA5B,CAAP,EAAwC,UAASd,EAAT,EAAYG,MAAZ,EAAmB;AACzD;AACDR,YAAAA,CAAC,CAAC,SAAOa,KAAP,GAAaL,MAAd,CAAD,CAAuBmB,KAAvB,CAA6B,YAAW;AACvC3B,cAAAA,CAAC,CAAC,gBAAD,CAAD,CAAoB0B,GAApB,CAAwB,SAAxB,EAAkC,OAAlC;AACA1B,cAAAA,CAAC,CAAC,UAAD,CAAD,CAAc0B,GAAd,CAAkB,SAAlB,EAA4B,OAA5B;AACA1B,cAAAA,CAAC,CAAC,cAAD,CAAD,CAAkB0B,GAAlB,CAAsB,SAAtB,EAAgC,MAAhC;AACC,kBAAIE,SAAS,GAAChB,QAAQ,CAACC,KAAD,CAAR,CAAgBK,KAAhB,CAAsBC,KAAtB,CAA4B,GAA5B,CAAd;AACC,kBAAIU,SAAS,GAAGD,SAAS,CAACE,OAAV,CAAkBtB,MAAlB,CAAhB;;AACA,kBAAIqB,SAAS,GAAG,CAAC,CAAjB,EAAmB;AAACD,gBAAAA,SAAS,CAACG,MAAV,CAAiBF,SAAjB,EAA4B,CAA5B;AAAgC;;AACpDjB,cAAAA,QAAQ,CAACC,KAAD,CAAR,CAAgBK,KAAhB,GAAsBc,QAAQ,CAACJ,SAAD,CAA9B;AACA5B,cAAAA,CAAC,CAACiC,IAAF,CAAO;AACHC,gBAAAA,IAAI,EAAC,KADF;AAEHC,gBAAAA,GAAG,EAACC,YAAY,GAACxB,QAAQ,CAACC,KAAD,CAAR,CAAgBG,KAF9B;AAGHL,gBAAAA,IAAI,EAAC0B,IAAI,CAACC,SAAL,CAAe1B,QAAQ,CAACC,KAAD,CAAvB,CAHF;AAIH0B,gBAAAA,QAAQ,EAAC,MAJN;AAKHC,gBAAAA,WAAW,EAAC,kBALT;AAMHC,gBAAAA,OAAO,EAAG,UAASC,MAAT,EAAiB;AACvBC,kBAAAA,OAAO,CAACC,GAAR,CAAYF,MAAZ;;AACA,sBAAGA,MAAM,CAACG,GAAP,IAAY,CAAf,EAAiB;AAAC;AACd7C,oBAAAA,CAAC,CAAC,QAAMa,KAAN,GAAYL,MAAb,CAAD,CAAsBsC,MAAtB;AACA9C,oBAAAA,CAAC,CAAC,gBAAD,CAAD,CAAoB0B,GAApB,CAAwB,SAAxB,EAAkC,MAAlC;AACA1B,oBAAAA,CAAC,CAAC,eAAaa,KAAb,GAAmBL,MAApB,CAAD,CAA6BkB,GAA7B,CAAiC,SAAjC,EAA2C,MAA3C;AACH;AACJ,iBAbE;AAcHqB,gBAAAA,KAAK,EAAG,UAASC,CAAT,EAAW;AACfL,kBAAAA,OAAO,CAACC,GAAR,CAAYI,CAAC,CAACC,MAAd;AACAN,kBAAAA,OAAO,CAACC,GAAR,CAAYI,CAAC,CAACE,YAAd;AACEC,kBAAAA,KAAK,CAAC,eAAaH,CAAC,CAACE,YAAhB,CAAL;AACElD,kBAAAA,CAAC,CAAC,UAAD,CAAD,CAAc0B,GAAd,CAAkB,SAAlB,EAA4B,MAA5B;AACF1B,kBAAAA,CAAC,CAAC,iBAAD,CAAD,CAAqB0B,GAArB,CAAyB,SAAzB,EAAmC,OAAnC;AACA1B,kBAAAA,CAAC,CAAC,WAAD,CAAD,CAAe0B,GAAf,CAAmB,SAAnB,EAA6B,OAA7B;AACL;AArBE,eAAP;AAuBH,aA/BA,EAF0D,CAkC3D;;AACA1B,YAAAA,CAAC,CAAC,YAAUa,KAAV,GAAgBL,MAAjB,CAAD,CAA0BmB,KAA1B,CAAgC,YAAW;AACzC,kBAAIlB,OAAO,GAACT,CAAC,CAAC,iBAAea,KAAf,GAAqBL,MAAtB,CAAD,CAA+B4C,GAA/B,EAAZ;;AACA,kBAAG3C,OAAO,IAAE,EAAZ,EAAe;AACb0C,gBAAAA,KAAK,CAAC,QAAD,CAAL;AACA,uBAAO,KAAP;AAAc;;AACd,kBAAIE,QAAQ,GAAC,KAAb;AACA,kBAAIC,aAAa,GAAC,KAAlB;AACA,kBAAI1B,SAAS,GAAChB,QAAQ,CAACC,KAAD,CAAR,CAAgBK,KAAhB,CAAsBC,KAAtB,CAA4B,GAA5B,CAAd;AACAnB,cAAAA,CAAC,CAACI,IAAF,CAAOwB,SAAP,EAAiB,UAASvB,EAAT,EAAYC,IAAZ,EAAiB;AAAC;AACjC,oBAAGG,OAAO,IAAEF,QAAQ,CAACD,IAAD,CAApB,EAA2B;AAC3BN,kBAAAA,CAAC,CAAC,gBAAD,CAAD,CAAoB0B,GAApB,CAAwB,SAAxB,EAAkC,OAAlC;AACC1B,kBAAAA,CAAC,CAAC,aAAD,CAAD,CAAiB0B,GAAjB,CAAqB,SAArB,EAA+B,OAA/B;AACA1B,kBAAAA,CAAC,CAAC,cAAD,CAAD,CAAkB0B,GAAlB,CAAsB,SAAtB,EAAgC,OAAhC;AACA1B,kBAAAA,CAAC,CAAC,UAAD,CAAD,CAAc0B,GAAd,CAAkB,SAAlB,EAA4B,MAA5B;AACD1B,kBAAAA,CAAC,CAAC,iBAAD,CAAD,CAAqB0B,GAArB,CAAyB,SAAzB,EAAmC,MAAnC;AACE2B,kBAAAA,QAAQ,GAAC,IAAT;AACD,yBAAO,KAAP;AACA;AAAC,eATJ;;AAUF,kBAAG,CAACA,QAAJ,EACA;AACErD,gBAAAA,CAAC,CAACI,IAAF,CAAOG,QAAP,EAAgB,UAASF,EAAT,EAAYC,IAAZ,EAAiB;AAAC;AAChC,sBAAGG,OAAO,IAAEH,IAAZ,EAAiB;AACjB;AACE,0BAAIiD,KAAK,GAAG3B,SAAS,CAACE,OAAV,CAAkBtB,MAAlB,CAAZ;;AACA,0BAAI+C,KAAK,GAAG,CAAC,CAAb,EAAe;AACb3B,wBAAAA,SAAS,CAACG,MAAV,CAAiBwB,KAAjB,EAAwB,CAAxB;AAA4B,uBAHhC,CAGgC;;;AAC9B3B,sBAAAA,SAAS,CAAC4B,IAAV,CAAenD,EAAf,EAJF,CAIoB;;AAClBO,sBAAAA,QAAQ,CAACC,KAAD,CAAR,CAAgBK,KAAhB,GAAsBc,QAAQ,CAACJ,SAAD,CAA9B,CALF,CAK2C;;AACzC6B,sBAAAA,SAAS,CAAC5C,KAAD,CAAT,CANF,CAMkB;;AAClByC,sBAAAA,aAAa,GAAC,IAAd;AACD,6BAAO,KAAP,CARC,CAQW;AACV;AAAC,iBAXJ;;AAYF,oBAAG,CAACA,aAAJ,EACA;AACAtD,kBAAAA,CAAC,CAAC,gBAAD,CAAD,CAAoB0B,GAApB,CAAwB,SAAxB,EAAkC,OAAlC;AACA1B,kBAAAA,CAAC,CAAC,UAAD,CAAD,CAAc0B,GAAd,CAAkB,SAAlB,EAA4B,OAA5B;AACA1B,kBAAAA,CAAC,CAAC,cAAD,CAAD,CAAkB0B,GAAlB,CAAsB,SAAtB,EAAgC,MAAhC;AACA,sBAAIgC,OAAO,GAAG;AAAC,8BAAS,IAAV;AAAe,+BAAUjD,OAAzB,CAAiC;;AAAjC,mBAAd;AACAT,kBAAAA,CAAC,CAACiC,IAAF,CAAO;AACLC,oBAAAA,IAAI,EAAC,MADA;AAELC,oBAAAA,GAAG,EAACwB,UAFC;AAGLhD,oBAAAA,IAAI,EAAC0B,IAAI,CAACC,SAAL,CAAeoB,OAAf,CAHA;AAILnB,oBAAAA,QAAQ,EAAC,MAJJ;AAKLC,oBAAAA,WAAW,EAAC,kBALP;AAMLC,oBAAAA,OAAO,EAAG,UAASC,MAAT,EAAiB;AACvBC,sBAAAA,OAAO,CAACC,GAAR,CAAYF,MAAZ;;AACA,0BAAGA,MAAM,CAACjC,OAAP,IAAgBA,OAAnB,EAA2B;AAAC;AAC1B,4BAAI8C,KAAK,GAAG3B,SAAS,CAACE,OAAV,CAAkBtB,MAAlB,CAAZ;;AACF,4BAAI+C,KAAK,GAAG,CAAC,CAAb,EAAe;AACb3B,0BAAAA,SAAS,CAACG,MAAV,CAAiBwB,KAAjB,EAAwB,CAAxB;AAA4B,yBAHH,CAGG;;;AAC1B3B,wBAAAA,SAAS,CAAC4B,IAAV,CAAed,MAAM,CAAClC,MAAtB;AACAI,wBAAAA,QAAQ,CAACC,KAAD,CAAR,CAAgBK,KAAhB,GAAsBc,QAAQ,CAACJ,SAAD,CAA9B,CALuB,CAKkB;;AACzC6B,wBAAAA,SAAS,CAAC5C,KAAD,CAAT;AACH;AACJ,qBAhBI;AAiBLkC,oBAAAA,KAAK,EAAG,UAASC,CAAT,EAAW;AACfL,sBAAAA,OAAO,CAACC,GAAR,CAAYI,CAAC,CAACC,MAAd;AACAN,sBAAAA,OAAO,CAACC,GAAR,CAAYI,CAAC,CAACE,YAAd;AACEC,sBAAAA,KAAK,CAAC,eAAaH,CAAC,CAACE,YAAhB,CAAL;AACAlD,sBAAAA,CAAC,CAAC,UAAD,CAAD,CAAc0B,GAAd,CAAkB,SAAlB,EAA4B,MAA5B;AACA1B,sBAAAA,CAAC,CAAC,iBAAD,CAAD,CAAqB0B,GAArB,CAAyB,SAAzB,EAAmC,OAAnC;AACA1B,sBAAAA,CAAC,CAAC,WAAD,CAAD,CAAe0B,GAAf,CAAmB,SAAnB,EAA6B,OAA7B;AACL;AAxBI,mBAAP,EALA,CA+BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACC;AACA;AACF,aA3FD;AA4FE,WA/HF,EAlCM,CAkKL;;AACP1B,UAAAA,CAAC,CAAC,WAASa,KAAV,CAAD,CAAkBc,KAAlB,CAAwB,YAAU;AAC1B,gBAAG3B,CAAC,CAAC,WAASa,KAAV,CAAD,CAAkBuC,GAAlB,MAAyB,EAA5B,EAA+B;AAC7BD,cAAAA,KAAK,CAAC,QAAD,CAAL;AACA,qBAAO,KAAP;AAAc;;AACf,gBAAIS,KAAK,GAAC,IAAV;AACA,gBAAIC,UAAU,GAAC,KAAf;AACA,gBAAIjC,SAAS,GAAChB,QAAQ,CAACC,KAAD,CAAR,CAAgBK,KAAhB,CAAsBC,KAAtB,CAA4B,GAA5B,CAAd;AACTnB,YAAAA,CAAC,CAACI,IAAF,CAAOwB,SAAP,EAAiB,UAASvB,EAAT,EAAYC,IAAZ,EAAiB;AAAC;AACjC,kBAAGN,CAAC,CAAC,WAASa,KAAV,CAAD,CAAkBuC,GAAlB,MAAyB7C,QAAQ,CAACD,IAAD,CAApC,EAA2C;AAC7CsD,gBAAAA,KAAK,GAAC,KAAN;AACE5D,gBAAAA,CAAC,CAAC,gBAAD,CAAD,CAAoB0B,GAApB,CAAwB,SAAxB,EAAkC,OAAlC;AACC1B,gBAAAA,CAAC,CAAC,aAAD,CAAD,CAAiB0B,GAAjB,CAAqB,SAArB,EAA+B,OAA/B;AACA1B,gBAAAA,CAAC,CAAC,cAAD,CAAD,CAAkB0B,GAAlB,CAAsB,SAAtB,EAAgC,OAAhC;AACA1B,gBAAAA,CAAC,CAAC,UAAD,CAAD,CAAc0B,GAAd,CAAkB,SAAlB,EAA4B,MAA5B;AACD1B,gBAAAA,CAAC,CAAC,iBAAD,CAAD,CAAqB0B,GAArB,CAAyB,SAAzB,EAAmC,MAAnC;AACC,uBAAO,KAAP,CAP0C,CAO7B;AACb;AACF,aAVD;;AAWA,gBAAGkC,KAAH,EAAS;AACT5D,cAAAA,CAAC,CAACI,IAAF,CAAOG,QAAP,EAAgB,UAASF,EAAT,EAAYC,IAAZ,EAAiB;AAAC;AACjC,oBAAGN,CAAC,CAAC,WAASa,KAAV,CAAD,CAAkBuC,GAAlB,MAAyB9C,IAA5B,EACA;AACDuD,kBAAAA,UAAU,GAAC,IAAX,CADC,CACc;;AACfjC,kBAAAA,SAAS,CAAC4B,IAAV,CAAenD,EAAf;AACAO,kBAAAA,QAAQ,CAACC,KAAD,CAAR,CAAgBK,KAAhB,GAAsBc,QAAQ,CAACJ,SAAD,CAA9B,CAHC,CAGwC;;AACzC6B,kBAAAA,SAAS,CAAC5C,KAAD,CAAT;AACA,yBAAO,KAAP,CALC,CAKW;AACV;AACD,eATD;;AAUA,kBAAG,CAACgD,UAAJ,EAAe;AACb,oBAAIH,OAAO,GAAG;AAAC,4BAAS,IAAV;AAAe,6BAAU1D,CAAC,CAAC,WAASa,KAAV,CAAD,CAAkBuC,GAAlB,EAAzB,CAAiD;;AAAjD,iBAAd;AACApD,gBAAAA,CAAC,CAAC,gBAAD,CAAD,CAAoB0B,GAApB,CAAwB,SAAxB,EAAkC,OAAlC;AACA1B,gBAAAA,CAAC,CAAC,UAAD,CAAD,CAAc0B,GAAd,CAAkB,SAAlB,EAA4B,OAA5B;AACA1B,gBAAAA,CAAC,CAAC,cAAD,CAAD,CAAkB0B,GAAlB,CAAsB,SAAtB,EAAgC,MAAhC;AACA1B,gBAAAA,CAAC,CAACiC,IAAF,CAAO;AACLC,kBAAAA,IAAI,EAAC,MADA;AAELC,kBAAAA,GAAG,EAACwB,UAFC;AAGLhD,kBAAAA,IAAI,EAAC0B,IAAI,CAACC,SAAL,CAAeoB,OAAf,CAHA;AAILnB,kBAAAA,QAAQ,EAAC,MAJJ;AAKLC,kBAAAA,WAAW,EAAC,kBALP;AAMLC,kBAAAA,OAAO,EAAG,UAASC,MAAT,EAAiB;AACvBC,oBAAAA,OAAO,CAACC,GAAR,CAAYF,MAAZ;;AACA,wBAAGA,MAAM,CAACjC,OAAP,IAAgBT,CAAC,CAAC,WAASa,KAAV,CAAD,CAAkBuC,GAAlB,EAAnB,EAA2C;AAAC;AACxCxB,sBAAAA,SAAS,CAAC4B,IAAV,CAAed,MAAM,CAAClC,MAAtB;AACAI,sBAAAA,QAAQ,CAACC,KAAD,CAAR,CAAgBK,KAAhB,GAAsBc,QAAQ,CAACJ,SAAD,CAA9B,CAFuC,CAEE;;AAEzC6B,sBAAAA,SAAS,CAAC5C,KAAD,CAAT;AACH;AACJ,mBAdI;AAeLkC,kBAAAA,KAAK,EAAG,UAASC,CAAT,EAAW;AACfL,oBAAAA,OAAO,CAACC,GAAR,CAAYI,CAAC,CAACC,MAAd;AACAN,oBAAAA,OAAO,CAACC,GAAR,CAAYI,CAAC,CAACE,YAAd;AACEC,oBAAAA,KAAK,CAAC,eAAaH,CAAC,CAACE,YAAhB,CAAL;AACAlD,oBAAAA,CAAC,CAAC,UAAD,CAAD,CAAc0B,GAAd,CAAkB,SAAlB,EAA4B,MAA5B;AACA1B,oBAAAA,CAAC,CAAC,iBAAD,CAAD,CAAqB0B,GAArB,CAAyB,SAAzB,EAAmC,OAAnC;AACA1B,oBAAAA,CAAC,CAAC,WAAD,CAAD,CAAe0B,GAAf,CAAmB,SAAnB,EAA6B,OAA7B;AACL;AAtBI,iBAAP;AAwBD,eAxCQ,CAyCT;;AACC;AACO,WA7DR,EAnKY,CAiOZ;;AACA1B,UAAAA,CAAC,CAAC,eAAaa,KAAd,CAAD,CAAsBc,KAAtB,CAA4B,YAAU;AACpC,gBAAImC,MAAM,GAAC9D,CAAC,CAAC,iBAAea,KAAf,GAAqB,YAAtB,CAAD,CAAqCuC,GAArC,EAAX;AACA,gBAAIW,MAAJ;AACA,gBAAIC,GAAJ;;AACA,oBAAOF,MAAP;AACF,mBAAK,GAAL;AAASC,gBAAAA,MAAM,GAAC,CAAP;AACTC,gBAAAA,GAAG,GAAC,EAAJ;AACA;;AACA,mBAAK,GAAL;AAASD,gBAAAA,MAAM,GAAC,EAAP;AACTC,gBAAAA,GAAG,GAAC,GAAJ;AACA;;AACA,mBAAK,QAAL;AACE,oBAAIhE,CAAC,CAAC,UAAQa,KAAT,CAAD,CAAiBuC,GAAjB,MAAwB,EAAzB,IAA+BpD,CAAC,CAAC,UAAQa,KAAT,CAAD,CAAiBuC,GAAjB,MAAwB,EAA1D,EACA;AACED,kBAAAA,KAAK,CAAC,WAAD,CAAL;AACA,yBAAO,KAAP;AACD;;AACDY,gBAAAA,MAAM,GAAC/D,CAAC,CAAC,UAAQa,KAAT,CAAD,CAAiBuC,GAAjB,EAAP;AACAY,gBAAAA,GAAG,GAAChE,CAAC,CAAC,UAAQa,KAAT,CAAD,CAAiBuC,GAAjB,EAAJ;AACA;AAfA;;AAiBA,gBAAI3C,OAAO,GAAG,iBAAesD,MAAf,GAAsB,WAAtB,GAAkCC,GAAlC,GAAsC,GAApD;AACA,gBAAIC,SAAS,GAAC;AAAC,wBAAS,cAAYrD,QAAQ,CAACC,KAAD,CAAR,CAAgBG,KAA5B,GAAkC,mBAA5C;AAAgE,uBAAQ,aAAxE;AAAsF,yBAAUP;AAAhG,aAAd;AACAT,YAAAA,CAAC,CAAC,gBAAD,CAAD,CAAoB0B,GAApB,CAAwB,SAAxB,EAAkC,OAAlC;AACA1B,YAAAA,CAAC,CAAC,UAAD,CAAD,CAAc0B,GAAd,CAAkB,SAAlB,EAA4B,OAA5B;AACA1B,YAAAA,CAAC,CAAC,cAAD,CAAD,CAAkB0B,GAAlB,CAAsB,SAAtB,EAAgC,MAAhC;AACA1B,YAAAA,CAAC,CAACiC,IAAF,CAAO;AACLC,cAAAA,IAAI,EAAC,MADA;AAELC,cAAAA,GAAG,EAAC+B,WAFC;AAGLvD,cAAAA,IAAI,EAAC0B,IAAI,CAACC,SAAL,CAAe2B,SAAf,CAHA;AAIL1B,cAAAA,QAAQ,EAAC,MAJJ;AAKLC,cAAAA,WAAW,EAAC,kBALP;AAMLC,cAAAA,OAAO,EAAG,UAASC,MAAT,EAAiB;AACvBC,gBAAAA,OAAO,CAACC,GAAR,CAAYF,MAAZ;;AACA,oBAAGA,MAAM,CAACG,GAAP,IAAY,CAAf,EAAiB;AAAC;AAChB7C,kBAAAA,CAAC,CAAC,gBAAD,CAAD,CAAoB0B,GAApB,CAAwB,SAAxB,EAAkC,MAAlC;AACA1B,kBAAAA,CAAC,CAAC,UAAD,CAAD,CAAc0B,GAAd,CAAkB,SAAlB,EAA4B,MAA5B;AACA1B,kBAAAA,CAAC,CAAC,iBAAea,KAAhB,CAAD,CAAwBa,GAAxB,CAA4B,SAA5B,EAAsC,MAAtC;AACA1B,kBAAAA,CAAC,CAAC,eAAaa,KAAd,CAAD,CAAsBsD,IAAtB,CAA2BJ,MAAM,GAAC,IAAP,GAAYC,GAAZ,GAAgB,GAA3C;AACD;AACJ,eAdI;AAeLjB,cAAAA,KAAK,EAAG,UAASC,CAAT,EAAW;AACfL,gBAAAA,OAAO,CAACC,GAAR,CAAYI,CAAC,CAACC,MAAd;AACAN,gBAAAA,OAAO,CAACC,GAAR,CAAYI,CAAC,CAACE,YAAd;AACEC,gBAAAA,KAAK,CAAC,eAAaH,CAAC,CAACE,YAAhB,CAAL;AACAlD,gBAAAA,CAAC,CAAC,UAAD,CAAD,CAAc0B,GAAd,CAAkB,SAAlB,EAA4B,MAA5B;AACA1B,gBAAAA,CAAC,CAAC,iBAAD,CAAD,CAAqB0B,GAArB,CAAyB,SAAzB,EAAmC,OAAnC;AACA1B,gBAAAA,CAAC,CAAC,WAAD,CAAD,CAAe0B,GAAf,CAAmB,SAAnB,EAA6B,OAA7B;AACL;AAtBI,aAAP;AAwBD,WAlDD,EAlOY,CAsRZ;;AACA,cAAI0C,QAAQ,GAACC,WAAW,GAACzD,QAAQ,CAACC,KAAD,CAAR,CAAgBG,KAAzC;AACAhB,UAAAA,CAAC,CAACiC,IAAF,CAAO;AACLC,YAAAA,IAAI,EAAC,KADA;AAELC,YAAAA,GAAG,EAACiC,QAFC;AAGL7B,YAAAA,QAAQ,EAAC,MAHJ;AAILC,YAAAA,WAAW,EAAC,kBAJP;AAKLC,YAAAA,OAAO,EAAC,UAASC,MAAT,EAAgB;AACtBC,cAAAA,OAAO,CAACC,GAAR,CAAYF,MAAZ;AACA1C,cAAAA,CAAC,CAAC,eAAaa,KAAd,CAAD,CAAsBsD,IAAtB,CAA2BzB,MAAM,CAACqB,MAAP,GAAc,IAAd,GAAmBrB,MAAM,CAACsB,GAA1B,GAA8B,GAAzD;AACD;AARI,WAAP;AAUO,SAnSG;AAoSG,OAvSP;AAwSK,KApTT,EAoTWM,IApTX,CAoTgB,YAAU;AAAE;AAClB;AACF,UAAI,CAACC,QAAF,IAAc,CAACC,UAAlB,EAA8B;AAC9BxE,QAAAA,CAAC,CAAC,aAAD,CAAD,CAAiByB,MAAjB,CAAwB,wGAAxB;AACAzB,QAAAA,CAAC,CAAC,SAAD,CAAD,CAAa2B,KAAb,CAAmB,YAAW;AAC5B3B,UAAAA,CAAC,CAAC,SAAD,CAAD,CAAa0B,GAAb,CAAiB,SAAjB,EAA2B,MAA3B;AACA1B,UAAAA,CAAC,CAAC,UAAD,CAAD,CAAc0B,GAAd,CAAkB,SAAlB,EAA4B,OAA5B;AACA1B,UAAAA,CAAC,CAAC,iBAAD,CAAD,CAAqB0B,GAArB,CAAyB,SAAzB,EAAmC,MAAnC;AACF3B,UAAAA,IAAI;AAAG,SAJP;AAKAwE,QAAAA,QAAQ,GAAC,IAAT;AACAvE,QAAAA,CAAC,CAAC,UAAD,CAAD,CAAc0B,GAAd,CAAkB,SAAlB,EAA4B,MAA5B;AACA1B,QAAAA,CAAC,CAAC,iBAAD,CAAD,CAAqB0B,GAArB,CAAyB,SAAzB,EAAmC,OAAnC;AACG,OAVH,MAWC;AACH1B,QAAAA,CAAC,CAAC,UAAD,CAAD,CAAc0B,GAAd,CAAkB,SAAlB,EAA4B,MAA5B;AACA1B,QAAAA,CAAC,CAAC,iBAAD,CAAD,CAAqB0B,GAArB,CAAyB,SAAzB,EAAmC,OAAnC;AACA1B,QAAAA,CAAC,CAAC,SAAD,CAAD,CAAa0B,GAAb,CAAiB,SAAjB,EAA2B,OAA3B;AACA;AACC,KAtUP;AAuUC;AAED;;;;;;;AAKA,WAASJ,UAAT,CAAoBmD,QAApB,EAA6B5D,KAA7B,EACA;AACI,QAAI6D,OAAO,GAAC,EAAZ;AACA,QAAI9C,SAAS,GAAC6C,QAAQ,CAACtD,KAAT,CAAe,GAAf,CAAd;AACEnB,IAAAA,CAAC,CAACI,IAAF,CAAOwB,SAAP,EAAiB,UAASvB,EAAT,EAAYG,MAAZ,EAAmB;AACnCkE,MAAAA,OAAO,IAAE,uBAAqB7D,KAArB,GAA2BL,MAA3B,GAAkC,mBAAlC,GACR,2BADQ,GAER,+CAFQ,GAGR,wBAHQ,GAIR,yCAJQ,GAIkCK,KAJlC,GAIwCL,MAJxC,GAI+C,IAJ/C,GAIoDD,QAAQ,CAACC,MAAD,CAJ5D,GAIqE,cAJrE,GAKR,uBALQ,GAKgBI,QAAQ,CAACC,KAAD,CAAR,CAAgBG,KALhC,GAKsC,OALtC,GAMR,wBANQ,GAOR,UAPQ,GAQR,wCARQ,GAQiCH,KARjC,GAQuCL,MARvC,GAQ8C,kHAR9C,GAQiKK,KARjK,GAQuKL,MARvK,GAQ8K,uGAR9K,GASR,QATQ,GAUR,QAVQ,GAWR,uBAXQ,GAWgBK,KAXhB,GAWsBL,MAXtB,GAW6B,gDAX7B,GAYR,2BAZQ,GAaR,+CAbQ,GAcR,wBAdQ,GAeR,yCAfQ,GAekCK,KAflC,GAewCL,MAfxC,GAe+C,IAf/C,GAeoDD,QAAQ,CAACC,MAAD,CAf5D,GAeqE,cAfrE,GAgBR,uBAhBQ,GAgBgBI,QAAQ,CAACC,KAAD,CAAR,CAAgBG,KAhBhC,GAgBsC,OAhBtC,GAiBR,yCAjBQ,GAiBkCH,KAjBlC,GAiBwCL,MAjBxC,GAiB+C,gFAjB/C,GAkBR,UAlBQ,GAmBR,2CAnBQ,GAmBoCK,KAnBpC,GAmB0CL,MAnB1C,GAmBiD,+HAnBjD,GAmBiLK,KAnBjL,GAmBuLL,MAnBvL,GAmB8L,uGAnB9L,GAoBR,QApBQ,GAqBR,QArBD;AAsBF,KAvBC;AAwBF,WAAOkE,OAAP;AACH;;AACD,WAASnD,aAAT,CAAuBV,KAAvB,EAA6B;AAC3B,QAAI6D,OAAO,GAAC,EAAZ;AACGA,IAAAA,OAAO,IAAE,oBAAkB7D,KAAlB,GAAwB,gDAAxB,GACR,2BADQ,GAER,6CAFQ,GAGR,+CAHQ,GAIR,2BAJQ,GAIoBA,KAJpB,GAI0B,gFAJ1B,GAKR,SALQ,GAMR,0CANQ,GAMmCA,KANnC,GAMyC,8FANzC,GAOR,wBAPQ,GAOiBA,KAPjB,GAOuB,wBAPvB,GAOgDA,KAPhD,GAOsD,gIAPtD,GAQR,QARQ,GASR,QATD;AAUH,WAAO6D,OAAP;AACD;;AACD,WAASrD,SAAT,CAAmBoD,QAAnB,EAA4B5D,KAA5B,EAAkC;AAC9B,QAAI6D,OAAO,GAAC,gJAAZ;AACA,QAAI9C,SAAS,GAAC6C,QAAQ,CAACtD,KAAT,CAAe,GAAf,CAAd;AACEnB,IAAAA,CAAC,CAACI,IAAF,CAAOwB,SAAP,EAAiB,UAASvB,EAAT,EAAYG,MAAZ,EAAmB;AACnCkE,MAAAA,OAAO,IAAE,eAAa7D,KAAb,GAAmBL,MAAnB,GAA0B,qEAA1B,GAAgGA,MAAhG,GAAuG,2FAAvG,GAAmMK,KAAnM,GAAyML,MAAzM,GAAgN,0BAAhN,GAA2OD,QAAQ,CAACC,MAAD,CAAnP,GAA4P,WAA5P,GACR,0DADQ,GACmDK,KADnD,GACyDL,MADzD,GACgE,4BADhE,GAER,uBAFQ,GAEgBK,KAFhB,GAEsBL,MAFtB,GAE6B,sBAF7B,GAGR,kBAHQ,GAGWK,KAHX,GAGiBL,MAHjB,GAGwB,0BAHxB,GAIR,kDAJQ,GAMR,uDANQ,GAMgDK,KANhD,GAMsDL,MANtD,GAM6D,4BAN7D,GAOR,oBAPQ,GAOaK,KAPb,GAOmBL,MAPnB,GAO0B,sBAP1B,GAQR,eARQ,GAQQK,KARR,GAQcL,MARd,GAQqB,0BARrB,GASR,uDATD;AAUF,KAXC;AAYFkE,IAAAA,OAAO,IAAE,iHAA+G7D,KAA/G,GAAqH,yCAA9H;AACA,WAAO6D,OAAP;AACH;;AACD,WAASlD,cAAT,CAAwBX,KAAxB,EAA8B;AAChC,QAAI6D,OAAO,GAAC,EAAZ;AACAA,IAAAA,OAAO,IAAE,yBAAuB7D,KAAvB,GAA6B,yDAA7B,GACR,4BADQ,GACqBA,KADrB,GAC2B,gEAD3B,GAER,gEAFQ,GAEyDD,QAAQ,CAACC,KAAD,CAAR,CAAgBI,OAFzE,GAEiF,QAFjF,GAGR,uDAHQ,GAIR,0FAJQ,GAKR,8CALQ,GAKuCJ,KALvC,GAK6C,WAL7C,GAKyDA,KALzD,GAK+D,yEAL/D,GAMR,mBANQ,GAMYA,KANZ,GAMkB,2EANlB,GAQR,gDARQ,GAQyCA,KARzC,GAQ+C,WAR/C,GAQ2DA,KAR3D,GAQiE,yEARjE,GASR,oFATQ,GAUR,cAVQ,GAYR,0DAZQ,GAaR,mDAbQ,GAcR,sGAdQ,GAgBR,uDAhBQ,GAgBgDA,KAhBhD,GAgBsD,WAhBtD,GAgBkEA,KAhBlE,GAgBwE,8EAhBxE,GAiBR,kCAjBQ,GAiB2BA,KAjB3B,GAiBiC,gBAjBjC,GAkBR,2CAlBQ,GAkBoCA,KAlBpC,GAkB0C,qBAlB1C,GAkBgEA,KAlBhE,GAkBsE,yJAlBtE,GAmBR,8CAnBQ,GAoBR,4CApBQ,GAqBR,2BArBQ,GAsBR,kCAtBQ,GAsB2BA,KAtB3B,GAsBiC,gBAtBjC,GAuBR,8CAvBQ,GAuBuCA,KAvBvC,GAuB6C,qBAvB7C,GAuBmEA,KAvBnE,GAuByE,yJAvBzE,GAwBR,kDAxBQ,GAyBR,gDAzBQ,GA0BR,mCA1BQ,GA2BR,qBA3BQ,GA4BR,kCA5BQ,GA4B2BA,KA5B3B,GA4BiC,yCA5BjC,GA6BR,UA7BD;AA8BA,WAAO6D,OAAP;AACG;AACD;;;;;;;AAKA,WAAS1C,QAAT,CAAkBJ,SAAlB,EAA4B;AAC1B,QAAI+C,IAAI,GAAC,EAAT;AACM3E,IAAAA,CAAC,CAACI,IAAF,CAAOwB,SAAP,EAAiB,UAASvB,EAAT,EAAYC,IAAZ,EAAiB;AAC9BqE,MAAAA,IAAI,IAAErE,IAAN;AACA,UAAGD,EAAE,IAAEuB,SAAS,CAACR,MAAV,GAAiB,CAAxB,EACAuD,IAAI,IAAE,GAAN;AACH,KAJD;AAKA,WAAOA,IAAP;AACP;;AAED,WAASlB,SAAT,CAAmB5C,KAAnB,EAAyB;AACzBb,IAAAA,CAAC,CAACiC,IAAF,CAAO;AACLC,MAAAA,IAAI,EAAC,KADA;AAELC,MAAAA,GAAG,EAACC,YAAY,GAACxB,QAAQ,CAACC,KAAD,CAAR,CAAgBG,KAF5B;AAGLL,MAAAA,IAAI,EAAC0B,IAAI,CAACC,SAAL,CAAe1B,QAAQ,CAACC,KAAD,CAAvB,CAHA;AAIL0B,MAAAA,QAAQ,EAAC,MAJJ;AAKLC,MAAAA,WAAW,EAAC,kBALP;AAMLC,MAAAA,OAAO,EAAG,UAASC,MAAT,EAAiB;AACvBC,QAAAA,OAAO,CAACC,GAAR,CAAYF,MAAZ;;AACA,YAAGA,MAAM,CAACG,GAAP,IAAY,CAAf,EAAiB;AAAC;AAChB+B,UAAAA,QAAQ,CAACC,MAAT;AACD;AACJ,OAXI;AAYL9B,MAAAA,KAAK,EAAG,UAASC,CAAT,EAAW;AACfL,QAAAA,OAAO,CAACC,GAAR,CAAYI,CAAC,CAACC,MAAd;AACAN,QAAAA,OAAO,CAACC,GAAR,CAAYI,CAAC,CAACE,YAAd;AACEC,QAAAA,KAAK,CAAC,eAAaH,CAAC,CAACE,YAAhB,CAAL;AACElD,QAAAA,CAAC,CAAC,UAAD,CAAD,CAAc0B,GAAd,CAAkB,SAAlB,EAA4B,MAA5B;AACF1B,QAAAA,CAAC,CAAC,iBAAD,CAAD,CAAqB0B,GAArB,CAAyB,SAAzB,EAAmC,OAAnC;AACA1B,QAAAA,CAAC,CAAC,WAAD,CAAD,CAAe0B,GAAf,CAAmB,SAAnB,EAA6B,OAA7B;AACL;AAnBI,KAAP;AAoBC;;;;AAjfIoD,MAAAA,M;;;AACP;AACA;AAGO,YAAMC,YAAN,CAAmB;AAEtBC,QAAAA,WAAW,GAAG;AACZ,eAAKC,IAAL,GAAYH,MAAM,CAACI,QAAP,CAAgBC,IAAhB,CAAqBF,IAAjC;AAED;;AALqB;;;;AAOxBF,MAAAA,YAAY,CAACK,WAAb,GAA2B,0BAA3B;AAEI1E,MAAAA,U,GAAW,wC;AACXR,MAAAA,W,GAAY,0C;AACZmF,MAAAA,a,GAAc,6C;AACdjD,MAAAA,Y,GAAa,2C;AACbkD,MAAAA,a,GAAc,6C;AACd3B,MAAAA,U,GAAW,yC;AACXO,MAAAA,W,GAAY,yC;AACZG,MAAAA,W,GAAY,gD;AACZtD,MAAAA,U,GAAW,E;AACXR,MAAAA,Q,GAAS,IAAIgF,MAAJ,E;AACTC,MAAAA,c,GAAe,IAAID,MAAJ,E;AACf3E,MAAAA,Q,GAAS,IAAI2E,MAAJ,E;AACThB,MAAAA,Q,GAAS,K;AACTC,MAAAA,U,GAAW,K;AACfzE,MAAAA,IAAI","sourcesContent":["import config from 'app/core/config';\r\n//import getall from './getall';\r\n//import './g_apitest';\r\nimport './keywords.css!'\r\nimport './PARALLAX PIXEL STARS.css!'\r\nexport class KeyWordsCtrl {\r\n\r\n    constructor() {\r\n      this.name = config.bootData.user.name;\r\n      \r\n    }\r\n  }\r\n  KeyWordsCtrl.templateUrl = 'components/keywords.html';\r\n\r\n  var allJobsUrl=\"http://localhost:8080/api/jobs/alljobs\" \r\n  var allRulesUrl=\"http://localhost:8080/api/rules/allrules\"\r\n  var deleteRuleUrl=\"http://localhost:8080/api/rules/deleterule/\"\r\n  var updateJobUrl=\"http://localhost:8080/api/jobs/updatejob/\"\r\n  var updateRuleUrl=\"http://localhost:8080/api/rules/updaterule/\"\r\n  var newRuleUrl=\"http://localhost:8080/api/rules/newrule\"\r\n  var setalarmUrl=\"http://localhost:8080/nacosconfig/alarm\"\r\n  var getalarmUrl=\"http://localhost:8080/nacosconfig/getalarm?id=\"\r\n  var appendHtml=\"\"//Container+Model添加的总HTML\r\n  var rulesMap=new Object()//键值对映射表\r\n  var rulesArrayList=new Object()//全局对象\r\n  var rulesObj=new Object()\r\n  var initfail=false\r\n  var reinitfail=false\r\n  init()\r\n\r\n  function init(){\r\n  $.get(allRulesUrl,function(rulesdata){\r\n  /**\r\n   * @summary:API GetAll:rules表,遍历构建键值对\r\n   */\r\n      $.each(rulesdata,function(id,rule){\r\n  rulesMap[rule.ruleid]=rule.content\r\n      });\r\n\r\n  /**\r\n   * @summary:API GetAll:jobs表,遍历组装成HTML\r\n   * @return:JSON:[{ruleid:,content:}]\r\n   */\r\n      $.get(allJobsUrl,function(data){\r\n           //初始化[jobs表]全局变量↓\r\n           rulesObj=data\r\n          $.each(data,function(index,obj)\r\n          　　{\r\n      //HTML拼接↓\r\n      appendHtml=\"<div class='container' ><div class='containerinfo'>\"\r\n          +\"<div class='containertitle'>信息详情</div><div class='jobtype'>Log关键字过滤报警形任务</div>\"\r\n          +\"<table style='width:95%'>\"\r\n          +\"<tr><th>ID</th><td>\"+obj.jobId+\"</td> </tr>\"\r\n          +\"<tr><th>名称</th><td>\"+obj.jobName+\"</td>\"\r\n          +\"  </tr> <tr><th>关键字条数</th><td>\"+rulesObj[index].rules.split(\",\").length+\"</td>\"\r\n          +\"   </tr><tr><th>报警阈值</th><td id='alarmval_\"+index+\"'></td></tr></table></div>\"\r\n          +\"  <div class='containerbtns'>\"\r\n          +\"<button id='showbtn' class='gbutton' \"\r\n          +\"onclick=\\\"$('#myModal_\"+obj.jobId+\"').css('display','block');\"\r\n          +\"$('#close_\"+obj.jobId+\"').click(function(){\"\r\n              +\"$('#myModal_\"+obj.jobId+\"').css('display','none');});\\\">配置过滤关键字</button>\"\r\n\r\n              +\"<button id='showbtn' class='gbutton' \"\r\n              +\"onclick=\\\"$('#alarmModal_\"+index+\"').css('display','block');\"\r\n              +\"$('#alarmModalclose_\"+index+\"').click(function(){\"\r\n                  +\"$('#alarmModal_\"+index+\"').css('display','none');});\\\">配置报警阈值</button>\"\r\n              +\"<input class='gbutton' type='button' value='修改任务名称' />\"\r\n              +\"<input class='gbutton' type='button' value='Flink集群监控' /></div></div>\"\r\n  \r\n              +\"<div id='myModal_\"+obj.jobId+\"' class='modal' style='padding-top:50px'><span id='close_\"+obj.jobId+\"'><button type='button' class='dialogclose'>关闭</button></span><div class='containertitle'>配置过滤关键字</div><div class='jobtype'>\"+obj.jobName+\"</div>\"+modelInit(rulesObj[index].rules,index)+\"<div id='caption_\"+obj.jobId+\"'></div></div>\"\r\n              +dialogInit(rulesObj[index].rules,index)+adddialogInit(index)+alarmModelInit(index);\r\n\r\n      $('#containers').append(appendHtml)   \r\n      $('#loadingdialog').css('display','none');\r\n      $('.wait').css('display','none');\r\n      $(\"#add\"+index).click(function(){\r\n        $('#dialog'+index).css('display','block')\r\n      }) \r\n  /**\r\n   *@summary:在插入HTML之后对所有【删除】和【修改】按钮的指定id进行click事件绑定\r\n   */\r\n      $.each(rulesObj[index].rules.split(','),function(id,ruleid){\r\n        //【删除】按钮的click事件\r\n       $(\"#del\"+index+ruleid).click(function (){\r\n        $('#loadingdialog').css('display','block');\r\n        $('#loadbox').css('display','block');\r\n        $(\"#dialogclose\").css('display','none');\r\n         var ruleArray=rulesObj[index].rules.split(',')\r\n          var itemindex = ruleArray.indexOf(ruleid);\r\n          if (itemindex > -1){ruleArray.splice(itemindex, 1);}\r\n          rulesObj[index].rules=toString(ruleArray)\r\n          $.ajax({\r\n              type:\"PUT\",\r\n              url:updateJobUrl+rulesObj[index].jobId,\r\n              data:JSON.stringify(rulesObj[index]),\r\n              dataType:\"json\",\r\n              contentType:\"application/json\",\r\n              success : function(result) {\r\n                  console.log(result);\r\n                  if(result.ret==0){//返回数据ret:0\r\n                      $(\"#li\"+index+ruleid).remove()\r\n                      $('#loadingdialog').css('display','none');\r\n                      $('#deldialog'+index+ruleid).css('display','none');\r\n                  }\r\n              },\r\n              error : function(e){\r\n                  console.log(e.status);\r\n                  console.log(e.responseText);\r\n                    alert(\"操作失败，错误信息：\"+e.responseText)\r\n                      $('#loadbox').css('display','none')\r\n                    $('#operatefailbox').css('display','block')\r\n                    $('#dialogok').css('display','block')\r\n              }\r\n          })\r\n      });\r\n      //【修改】按钮的click事件\r\n      $('#update'+index+ruleid).click(function (){\r\n        var content=$('#updateinput'+index+ruleid).val()\r\n        if(content==\"\"){\r\n          alert(\"输入不可为空\")\r\n          return false;}\r\n          var samerule=false\r\n          var changeJobOnly=false\r\n          var ruleArray=rulesObj[index].rules.split(',')\r\n          $.each(ruleArray,function(id,rule){//job内对内容排重\r\n            if(content==rulesMap[rule]){\r\n            $('#loadingdialog').css('display','block')\r\n             $('#addfailbox').css('display','block')\r\n             $('#dialogclose').css('display','block')\r\n             $('#loadbox').css('display','none')\r\n            $('#connectfailbox').css('display','none')\r\n              samerule=true\r\n             return false;\r\n            }});\r\n        if(!samerule)\r\n        {\r\n          $.each(rulesMap,function(id,rule){//遍历规则表\r\n            if(content==rule)//rules表是否已经存在ID\r\n            {\r\n              var oldid = ruleArray.indexOf(ruleid);\r\n              if (oldid > -1){\r\n                ruleArray.splice(oldid, 1);}//splice 老Rule ID\r\n              ruleArray.push(id)//push新Rule ID\r\n              rulesObj[index].rules=toString(ruleArray)//更新全局类 \r\n              updateJob(index)//确定仅更新Job\r\n            changeJobOnly=true\r\n           return false//结束当前循环\r\n            }});\r\n        if(!changeJobOnly)\r\n        {\r\n        $('#loadingdialog').css('display','block');\r\n        $('#loadbox').css('display','block');\r\n        $(\"#dialogclose\").css('display','none');\r\n        var JsonObj = {\"ruleid\":null,\"content\":content}//新增rule对\r\n        $.ajax({\r\n          type:\"POST\",\r\n          url:newRuleUrl,\r\n          data:JSON.stringify(JsonObj) ,\r\n          dataType:\"json\",\r\n          contentType:\"application/json\",\r\n          success : function(result) {\r\n              console.log(result);\r\n              if(result.content==content){//返回数据job类,成功\r\n                var oldid = ruleArray.indexOf(ruleid);\r\n              if (oldid > -1){\r\n                ruleArray.splice(oldid, 1);}//splice 老Rule ID\r\n                  ruleArray.push(result.ruleid)\r\n                  rulesObj[index].rules=toString(ruleArray)//更新全局类 \r\n                  updateJob(index)\r\n              }\r\n          },\r\n          error : function(e){\r\n              console.log(e.status);\r\n              console.log(e.responseText);\r\n                alert(\"操作失败，错误信息：\"+e.responseText)\r\n                $('#loadbox').css('display','none')\r\n                $('#operatefailbox').css('display','block')\r\n                $('#dialogok').css('display','block')\r\n          }\r\n      })\r\n        // var JsonObj = {\"ruleid\":parseInt(ruleid),\"content\":content}\r\n        //   $.ajax({\r\n        //       type:\"PUT\",\r\n        //       url:updateRuleUrl+ruleid,\r\n        //       data:JSON.stringify(JsonObj),\r\n        //       dataType:\"json\",\r\n        //       contentType:\"application/json\",\r\n        //       success : function(result) {\r\n        //           console.log(result);\r\n        //           if(!result.ret){//返回数据ret:0,\r\n        //             rulesMap[ruleid]=content//修改全局变量\r\n        //               $('#loadingdialog').css('display','none');\r\n        //               $('#updatedialog'+index+ruleid).css('display','none');\r\n        //               $(\".content\"+index+ruleid).html(content)//执行成功的DOM操作\r\n        //           }\r\n        //       },\r\n        //       error : function(e){\r\n        //           console.log(e.status);\r\n        //           console.log(e.responseText);\r\n        //             alert(\"操作失败，错误信息：\"+e.responseText)\r\n        //               $('#loadbox').css('display','none')\r\n        //             $('#operatefailbox').css('display','block')\r\n        //             $('#dialogok').css('display','block')\r\n        //       }\r\n        //   })\r\n        }\r\n        }\r\n      });\r\n       });\r\n       //对所有【添加规则】按钮的指定id进行click事件绑定\r\n$('#addok'+index).click(function(){\r\n        if($('#input'+index).val()==\"\"){\r\n          alert(\"输入不可为空\")\r\n          return false;}\r\n         var ready=true\r\n         var updateRule=false\r\n         var ruleArray=rulesObj[index].rules.split(',')\r\n$.each(ruleArray,function(id,rule){//job内排重\r\n  if($('#input'+index).val()==rulesMap[rule]){\r\nready=false\r\n  $('#loadingdialog').css('display','block')\r\n   $('#addfailbox').css('display','block')\r\n   $('#dialogclose').css('display','block')\r\n   $('#loadbox').css('display','none')\r\n  $('#connectfailbox').css('display','none')\r\n   return false;//结束全局循环\r\n  }\r\n});\r\nif(ready){\r\n$.each(rulesMap,function(id,rule){//遍历规则表,确定是否更新规则表\r\n if($('#input'+index).val()==rule)\r\n {\r\nupdateRule=true//规则表已存在\r\nruleArray.push(id)\r\nrulesObj[index].rules=toString(ruleArray)//更新全局类\r\nupdateJob(index)\r\nreturn false//结束当前循环\r\n }\r\n})\r\nif(!updateRule){\r\n  var JsonObj = {\"ruleid\":null,\"content\":$('#input'+index).val()}//新增rule对\r\n  $('#loadingdialog').css('display','block');\r\n  $('#loadbox').css('display','block');\r\n  $(\"#dialogclose\").css('display','none');\r\n  $.ajax({\r\n    type:\"POST\",\r\n    url:newRuleUrl,\r\n    data:JSON.stringify(JsonObj) ,\r\n    dataType:\"json\",\r\n    contentType:\"application/json\",\r\n    success : function(result) {\r\n        console.log(result);\r\n        if(result.content==$('#input'+index).val()){//返回数据job类,成功\r\n            ruleArray.push(result.ruleid)\r\n            rulesObj[index].rules=toString(ruleArray)//更新全局类 \r\n\r\n            updateJob(index)\r\n        }\r\n    },\r\n    error : function(e){\r\n        console.log(e.status);\r\n        console.log(e.responseText);\r\n          alert(\"操作失败，错误信息：\"+e.responseText)\r\n          $('#loadbox').css('display','none')\r\n          $('#operatefailbox').css('display','block')\r\n          $('#dialogok').css('display','block')\r\n    }\r\n})\r\n}\r\n//更新Job类\r\n}\r\n       });\r\n//对所有【报警阀值】配置按钮的指定id进行click事件绑定\r\n$(\"#alarmbtn_\"+index).click(function(){\r\n  var choose=$(\"input[name='\"+index+\"']:checked\").val()\r\n  var minute\r\n  var num\r\n  switch(choose){\r\ncase '1':minute=1\r\nnum=10\r\nbreak;\r\ncase '2':minute=10\r\nnum=100\r\nbreak;\r\ncase 'custom':\r\n  if(($(\"#inpA\"+index).val()==\"\")&&($(\"#inpB\"+index).val()==\"\"))\r\n  {\r\n    alert(\"自定义输入不可为空\")\r\n    return false\r\n  }\r\n  minute=$(\"#inpA\"+index).val()\r\n  num=$(\"#inpB\"+index).val()\r\n  break;\r\n  }\r\n  var content = \"{\\\"minute\\\":\"+minute+\",\\\"num\\\":\"+num+\"}\"\r\n  var postParam={\"dataId\":\"FlinkJob.\"+rulesObj[index].jobId+\".properties.alarm\",\"group\":\"BaseService\",\"content\":content}\r\n  $('#loadingdialog').css('display','block');\r\n  $('#loadbox').css('display','block');\r\n  $(\"#dialogclose\").css('display','none');\r\n  $.ajax({\r\n    type:\"POST\",\r\n    url:setalarmUrl,\r\n    data:JSON.stringify(postParam) ,\r\n    dataType:\"json\",\r\n    contentType:\"application/json\",\r\n    success : function(result) {\r\n        console.log(result);\r\n        if(result.ret==0){//返回数据job类,成功\r\n          $('#loadingdialog').css('display','none');\r\n          $('#loadbox').css('display','none');\r\n          $(\"#alarmModal_\"+index).css(\"display\",\"none\")\r\n          $(\"#alarmval_\"+index).html(minute+\"分钟\"+num+\"次\")\r\n        }\r\n    },\r\n    error : function(e){\r\n        console.log(e.status);\r\n        console.log(e.responseText);\r\n          alert(\"操作失败，错误信息：\"+e.responseText)\r\n          $('#loadbox').css('display','none')\r\n          $('#operatefailbox').css('display','block')\r\n          $('#dialogok').css('display','block')\r\n    }\r\n})\r\n})\r\n\r\n//初始时读取预警阀值\r\nvar alarmurl=getalarmUrl+rulesObj[index].jobId\r\n$.ajax({\r\n  type:\"GET\",\r\n  url:alarmurl,\r\n  dataType:\"json\",\r\n  contentType:\"application/json\",\r\n  success:function(result){\r\n    console.log(result)\r\n    $(\"#alarmval_\"+index).html(result.minute+\"分钟\"+result.num+\"次\")\r\n  }\r\n})\r\n      });\r\n          　　});\r\n          }).fail(function(){ //连接失败-重连的机制\r\n            //连接失败-重连的机制\r\n          if((!initfail)&&(!reinitfail)){\r\n          $('#dialogbtns').append(\"<button id='reinit' class='gbutton' style='background-color: cornflowerblue;width: 100%'>重新加载</button>\")\r\n          $('#reinit').click(function (){\r\n            $('#reinit').css('display','none')\r\n            $('#loadbox').css('display','block')\r\n            $('#connectfailbox').css('display','none')\r\n          init()});\r\n          initfail=true\r\n          $('#loadbox').css('display','none')\r\n          $('#connectfailbox').css('display','block')\r\n            }\r\n       else{\r\n        $('#loadbox').css('display','none')\r\n        $('#connectfailbox').css('display','block')\r\n        $('#reinit').css('display','block')\r\n       }\r\n        }); \r\n  }\r\n  \r\n  /**\r\n   * @param:给定Rules ID字符串\r\n   * @summary：分割字符串为数组，遍历Map表从中取字段插入到Html中\r\n   * @returns: 组装生成的HTML\r\n   */\r\n  function dialogInit(rulesStr,index)\r\n  {\r\n      var htmlStr=\"\"\r\n      var ruleArray=rulesStr.split(',')\r\n        $.each(ruleArray,function(id,ruleid){\r\n         htmlStr+=\"<div id='deldialog\"+index+ruleid+\"' class='dialog'>\"\r\n         +\"<div class='dialoginner'>\"\r\n         +\"<span class='dialogTitle'>请确认本次操作删除的内容</span>\"\r\n         +\" <ul class='dialogul'>\"\r\n         +\"     <li>▮ 将要删除的字段：<span class='content\"+index+ruleid+\"'>\"+rulesMap[ruleid]+\"</span></li>\"\r\n         +\"     <li>▮ 字段所属任务ID: \"+rulesObj[index].jobId+\"</li>\"\r\n         +\"     <li>▮ 确认删除吗？</li>\"\r\n         +\"  </ul> \"\r\n         +\"<div class='dialogbtns'><input id='del\"+index+ruleid+\"' class='gbutton' type='button' value='确认' style='background-color: orangered;' /></li><input id='closedelDialog\"+index+ruleid+\"' class='gbutton' type='button' style='color: black;background-color: gray;' value='取消' /></li></div>\"\r\n         +\"</div>\"\r\n         +\"</div>\"\r\n         +\"<div id='updatedialog\"+index+ruleid+\"' class='loading dialog' style='display:none'>\"\r\n         +\"<div class='dialoginner'>\"\r\n         +\"<span class='dialogTitle'>请输入本次操作修改的内容</span>\"\r\n         +\" <ul class='dialogul'>\"\r\n         +\"     <li>▮ 将要修改的字段：<span class='content\"+index+ruleid+\"'>\"+rulesMap[ruleid]+\"</span></li>\"\r\n         +\"     <li>▮ 字段所属任务ID: \"+rulesObj[index].jobId+\"</li>\"\r\n         +\"     <li>▮ 修改后字段：<input id='updateinput\"+index+ruleid+\"' style='font-size: large;width: 100%;background: #243238;' type='text'/></li>\"\r\n         +\"  </ul> \"\r\n         +\"<div class='dialogbtns'><input id='update\"+index+ruleid+\"' class='gbutton' type='button' value='确认' style='background-color: #9ccadc;color: #000;' /></li><input id='closeupdateDialog\"+index+ruleid+\"' class='gbutton' type='button' style='color: black;background-color: gray;' value='取消' /></li></div>\"\r\n         +\"</div>\"\r\n         +\"</div>\";\r\n      });\r\n      return htmlStr\r\n  }\r\n  function adddialogInit(index){\r\n    var htmlStr=\"\"\r\n       htmlStr+=\"<div id='dialog\"+index+\"' class='loading dialog' style='display:none'>\"\r\n       +\"<div class='dialoginner'>\"\r\n       +\"<span class='dialogTitle'>请输入需要添加的字段</span>\"\r\n       +\" <ul class='dialogul' style='padding: 35px;'>\"\r\n       +\"     <li><input id='input\"+index+\"' style='font-size: large;width: 100%;background: #243238;' type='text'/></li>\"\r\n       +\" </ul> \"\r\n       +\"<div class='dialogbtns'><input id='addok\"+index+\"' class='gbutton' type='button' value='确认' style='background-color: #9ccadc;color: #000;' />\"\r\n       +\"<input id='closeDialog\"+index+\"' onClick=\\\"$('#dialog\"+index+\"').css('display','none')\\\" class='gbutton' type='button' style='color: black;background-color: gray;' value='取消' /></li></div>\"\r\n       +\"</div>\"\r\n       +\"</div>\";\r\n    return htmlStr\r\n  }\r\n  function modelInit(rulesStr,index){\r\n      var htmlStr=\"<table style='width:95%;margin: 15px 0 100px 15px;'><tr><th>规则ID</th> <th>规则内容</th> <th class='dialogtd'></th> <th class='dialogtd'></th></tr>\"\r\n      var ruleArray=rulesStr.split(',')\r\n        $.each(ruleArray,function(id,ruleid){\r\n         htmlStr+=\"<tr id='li\"+index+ruleid+\"' style='background-color: #9ccadcf2'><td ><p style='width: 30px;'>\"+ruleid+\"</p></td> <td class='dialogtdrule' style='background-color: #9ccadcf2;'><p class='content\"+index+ruleid+\"' style='width: 300px;'>\"+rulesMap[ruleid]+\"</p></td>\"\r\n         +\"<th class='dialogtd'><button  onclick=\\\"$('#updatedialog\"+index+ruleid+\"').css('display','block');\"\r\n         +\"$('#closeupdateDialog\"+index+ruleid+\"').click(function(){\"\r\n         +\"$('#updatedialog\"+index+ruleid+\"').css('display','none')\"\r\n         +\"});\\\" class='gbutton dialogBtn'>修改</button></th>\"\r\n\r\n         +\"<th class='dialogtd'><button  onclick=\\\"$('#deldialog\"+index+ruleid+\"').css('display','block');\"\r\n         +\"$('#closedelDialog\"+index+ruleid+\"').click(function(){\"\r\n         +\"$('#deldialog\"+index+ruleid+\"').css('display','none')\"\r\n         +\"});\\\" class='gbutton dialogBtn'>删除</button></th></tr>\"\r\n      });\r\n      htmlStr+=\"<tr><th>END</th> <th></th> <th class='dialogtd'></th> <th class='dialogtd'></th></tr></table><button id='add\"+index+\"' class='gbutton addbtn' >添加规则</button>\"\r\n      return htmlStr\r\n  }\r\n  function alarmModelInit(index){\r\nvar htmlStr=\"\"\r\nhtmlStr+=\"<div id='alarmModal_\"+index+\"' class='modal' style='display: none;padding-top:50px'>\"\r\n+\"<span id='alarmModalclose_\"+index+\"'><button type='button' class='dialogclose'>关闭</button></span>\"\r\n+\" <div class='containertitle'>配置报警阀值</div><div class='jobtype'>\"+rulesObj[index].jobName+\"</div>\"\r\n+\" <table style='width:95%;margin: 15px 0 100px 15px;'>\"\r\n+\"   <tr><th style='width: 1%'>选择</th> <th><p style='margin-left: 20%;'>规则内容</p></th></tr>\"\r\n+\"   <tr><td><label><input type='radio' name='\"+index+\"' id='r1_\"+index+\"' class='a-radio' value='1'><span class='b-radio'></span></label></td> \"\r\n+\"     <td for='r1_\"+index+\"' class='dialogtdrule' ><p style='margin-left: 20%;'>1分钟10次</p></td></tr>\"\r\n\r\n+\"   <tr><td > <label><input type='radio' name='\"+index+\"' id='r2_\"+index+\"' class='a-radio' value='2'><span class='b-radio'></span> </label></td>\"\r\n+\"     <td class='dialogtdrule' ><p style='margin-left: 20%;'>10分钟100次</p></td></tr>\"\r\n+\"    </table>\"\r\n\r\n+\"    <table style='width:95%;margin: 15px 0 100px 15px;'>\"\r\n+\"        <tr  style='background-color: #9ccadcf2'>\"\r\n+\"           <th style='width: 1%'>选择</th><th><p style='margin-left: 50%;'>自定义</p></th> <th></th></tr>\"\r\n             \r\n+\"        <tr><tr><td><label><input type='radio' name='\"+index+\"' id='rc_\"+index+\"' class='a-radio' value='custom'><span class='b-radio'></span></label></td> \"\r\n+\"           <td ><label for='inpA\"+index+\"' class='inp'>\"\r\n+\"              <input type='text' id='inpA\"+index+\"' onclick=\\\"$('#rc_\"+index+\"').click()\\\" onkeyup=\\\"this.value=this.value.replace(/[^0-9]/g,'')\\\" onafterpaste=\\\"this.value=this.value.replace(/[^0-9]/g,'')\\\" placeholder='&nbsp;'>\"\r\n+\"              <span class='label'>分钟数</span>\"\r\n+\"              <span class='border'></span>\"\r\n+\"            </label></td>\"\r\n+\"            <td><label for='inpB\"+index+\"' class='inp'>\"\r\n+\"                 <input type='text' id='inpB\"+index+\"' onclick=\\\"$('#rc_\"+index+\"').click()\\\" onkeyup=\\\"this.value=this.value.replace(/[^0-9]/g,'')\\\" onafterpaste=\\\"this.value=this.value.replace(/[^0-9]/g,'')\\\" placeholder='&nbsp;'>\"\r\n+\"                 <span class='label'>触发次数</span>\"\r\n+\"                  <span class='border'></span>\"\r\n+\"               </label></td></tr>\"\r\n+\"           </table>\"\r\n+\"           <button id='alarmbtn_\"+index+\"' class='gbutton addbtn' >确认更改</button>\"\r\n+\"  </div>\"\r\nreturn htmlStr\r\n  }\r\n  /**\r\n   * toString:数组转逗号分隔字符串，形如：（\"1,2,3\"）\r\n   * @param {Array[]} ruleArray \r\n   * @returns {String} rStr\r\n   */\r\n  function toString(ruleArray){\r\n    var rStr=\"\"\r\n          $.each(ruleArray,function(id,rule){\r\n              rStr+=rule\r\n              if(id!=ruleArray.length-1)\r\n              rStr+=','\r\n          });\r\n          return rStr;\r\n  }\r\n\r\n  function updateJob(index){ \r\n  $.ajax({\r\n    type:\"PUT\",\r\n    url:updateJobUrl+rulesObj[index].jobId,\r\n    data:JSON.stringify(rulesObj[index]),\r\n    dataType:\"json\",\r\n    contentType:\"application/json\",\r\n    success : function(result) {\r\n        console.log(result);\r\n        if(result.ret==0){//返回数据ret:0,成功\r\n          location.reload()\r\n        }\r\n    },\r\n    error : function(e){\r\n        console.log(e.status);\r\n        console.log(e.responseText);\r\n          alert(\"操作失败，错误信息：\"+e.responseText)\r\n            $('#loadbox').css('display','none')\r\n          $('#operatefailbox').css('display','block')\r\n          $('#dialogok').css('display','block')\r\n    }\r\n})}\r\n"],"file":"keywords.js"}